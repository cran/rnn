<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Dimitri Fichou" />

<meta name="date" content="2022-07-12" />

<title>LSTM units</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>







<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">LSTM units</h1>
<h4 class="author">Dimitri Fichou</h4>
<h4 class="date">2022-07-12</h4>



<div id="feed-forward-pass" class="section level1">
<h1>Feed forward pass</h1>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p><span class="math display">\[ f_t = sigmoid(h_{t-1} * W_f + x_t *
U_f) \]</span></p>
<p><span class="math display">\[ i_t = sigmoid(h_{t-1} * W_i + x_t *
U_i) \]</span></p>
<p><span class="math display">\[ g_t = tanh(h_{t-1} * W_g + x_t * U_g)
\]</span></p>
<p><span class="math display">\[ o_t = sigmoid(h_{t-1} * W_o + x_t *
U_o) \]</span></p>
<p><span class="math display">\[ C_t = C_{t-1} \cdot f_t + i_t \cdot g_t
\]</span></p>
<p><span class="math display">\[ h_t = y_t = tanh(C_t) \cdot o_t
\]</span></p>
</div>
<div id="back-propagation-pass" class="section level1">
<h1>Back propagation pass</h1>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>To perform the BPTT with a LSTM unit, we have the eror comming from
the top layer (<span class="math inline">\(\delta 1\)</span>), the
future cell (<span class="math inline">\(\delta 4\)</span>), the future
hidden state (<span class="math inline">\(\delta 2\)</span>). Also, we
have stored during the feed forward the states at each step of the
feeding. In the case of the future layer, this error is just set to zero
if not calculated yet. For convention, <span class="math inline">\(\cdot\)</span> correspond to point wise
multiplication, while <span class="math inline">\(*\)</span> correspond
to matrix multiplication.</p>
<p>The rules on how to back prpagate come from <a href="http://practicalcryptography.com/miscellaneous/machine-learning/graphically-determining-backpropagation-equations/">this
post</a>.</p>
<p><span class="math display">\[\delta 3 = \delta 1 + \delta 2
\]</span></p>
<p><span class="math display">\[\delta 5 = \delta 3 \cdot 6 = \delta 3
\cdot o_t \]</span></p>
<p><span class="math display">\[\delta 6 = \delta 3 \cdot 5 = \delta 3
\cdot tanh(c_t) \]</span></p>
<p><span class="math display">\[\delta 7 = \delta 5 \cdot f&#39;(5) =
\delta 5 \cdot tanh&#39;(tanh(c_t)) \]</span></p>
<p><span class="math display">\[\delta 8 = \delta 7 \cdot \delta
4  \]</span></p>
<p><span class="math display">\[\delta 9 = \delta 8 \cdot 10 = \delta 8
\cdot i_t  \]</span></p>
<p><span class="math display">\[\delta 10 = \delta 8 \cdot 9 = \delta 8
\cdot g_t  \]</span></p>
<p><span class="math display">\[\delta 11 = \delta 8 \cdot 12 = \delta 8
\cdot f_t  \]</span></p>
<p><span class="math display">\[\delta 12 = \delta 8 \cdot 11 = \delta 8
\cdot c_{t-1}  \]</span></p>
<p><span class="math display">\[\delta 13 = \delta 6 \cdot f&#39;(6) =
\delta 6 \cdot sigmoid&#39;(o_t) \]</span> <span class="math display">\[\delta 14 = \delta 9 \cdot f&#39;(9) = \delta 9
\cdot tanh&#39;(g_t) \]</span> <span class="math display">\[\delta 15 =
\delta 10 \cdot f&#39;(10) = \delta 10 \cdot sigmoid&#39;(i_t) \]</span>
<span class="math display">\[\delta 16 = \delta 12 \cdot f&#39;(12) =
\delta 12 \cdot sigmoid&#39;(f_t) \]</span></p>
<p><span class="math display">\[\delta 17 = \delta 13 * U_o^T \]</span>
<span class="math display">\[\delta 19 = \delta 14 * U_g^T \]</span>
<span class="math display">\[\delta 21 = \delta 15 * U_i^T \]</span>
<span class="math display">\[\delta 23 = \delta 16 * W_f^T \]</span>
<span class="math display">\[\delta 18 = \delta 13 * W_o^T \]</span>
<span class="math display">\[\delta 20 = \delta 14 * W_g^T \]</span>
<span class="math display">\[\delta 22 = \delta 16 * W_i^T \]</span>
<span class="math display">\[\delta 24 = \delta 16 * W_f^T \]</span></p>
<p><span class="math display">\[\delta 25 = \delta 18 + \delta 20 +
\delta 22 + \delta 24 \]</span> <span class="math display">\[\delta 26 =
\delta 17 + \delta 19 + \delta 21 + \delta 23 \]</span></p>
<p>The error <span class="math inline">\(\delta 11\)</span>, <span class="math inline">\(\delta 25\)</span> and <span class="math inline">\(\delta 26\)</span> are used for the next layers.
Once all those errors are available, it is possible to calculate the
weight update.</p>
<p><span class="math display">\[\delta W_f = \delta W_f + h_{t-1}^T *
\delta 16 \]</span> <span class="math display">\[\delta U_f = \delta U_f
+ x_{t}^T * \delta 16 \]</span></p>
<p><span class="math display">\[\delta W_i = \delta W_i + h_{t-1}^T *
\delta 15 \]</span> <span class="math display">\[\delta U_i = \delta U_i
+ x_{t}^T * \delta 15 \]</span></p>
<p><span class="math display">\[\delta W_g = \delta W_g + h_{t-1}^T *
\delta 14 \]</span> <span class="math display">\[\delta U_g = \delta U_g
+ x_{t}^T * \delta 14 \]</span></p>
<p><span class="math display">\[\delta W_o = \delta W_o + h_{t-1}^T *
\delta 13 \]</span> <span class="math display">\[\delta U_o = \delta U_o
+ x_{t}^T * \delta 13 \]</span></p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
